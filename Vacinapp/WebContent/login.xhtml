<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]> <html class="no-js" lang=""> <![endif]-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/template/template.xhtml">	

	<ui:define name="container">
	    <div class="container">
	      <div class="row">
	            <div class="col-md-8 col-md-offset-2 text-center">
	                <img class="big-logo" src="#{facesContext.externalContext.requestContextPath}/img/appIcon.png" />
	            </div>
	            
	            <h:form class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1">
	                <div class="form-group">
	                    <label for="txtEmail">Email</label>
	                    <h:inputText class="form-control" id="txtEmail" name="txtEmail" value="#{login.usuario.email}" />
	                </div>
	                <div class="form-group">
	                    <label for="txtPassword">Senha</label>
	                    <h:inputSecret class="form-control" id="txtPassword" name="txtPassword" value="#{login.usuario.password}" />
	                </div>
	                
	                <h:panelGroup id="alert-message" layout="block" rendered="#{not empty login.message}">
		                <div class="alert alert-danger" role="alert" style="padding: 5px; text-align: center;">
		                	<strong><h:outputText value="#{login.message}" /></strong>
		                </div>
	                </h:panelGroup>
	
	                <h:commandLink class="btn btn-primary" action="#{navigationController.goToCadastro}" value="Cadastro" />

	                <h:commandButton type="submit" class="btn btn-success pull-right" value="Entrar">
	                	<f:ajax listener="#{login.doLogin}" execute="@form" render="@form" />
	                </h:commandButton>
	            </h:form>
	        </div>
	    </div>
		<script>
			$(document).ready(function(){
				$('[id*=txtEmail]').attr('placeholder', 'Email');
				$('[id*=txtPassword]').attr('placeholder', 'Senha');
			});

			function validaEmail(email) {
				var filter = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
				
				if(filter.test(email)){
					return true;
				}
				return false;
			}
		</script>
	</ui:define>
	
</ui:composition>
